<nav class="navbar navbar-expand-lg shadow-sm">
  <div class="container-fluid">
    <!-- Brand Section -->
    <a class="navbar-brand d-flex align-items-center" [routerLink]="['/']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
      <img ngSrc="assets/icons/icon.png" alt="Fresh Fields Market" class="brand-logo me-2" height="512" width="512"/>
      <span class="brand-text">Fresh Fields Market</span>
    </a>

    <!-- Navigation Items -->
    <div class="nav-actions">
      <!-- Show these items only when logged in -->
      <ng-container *ngIf="isLoggedIn(); else loginButton">
        <!-- Cart Button with Badge -->
        <button class="btn btn-link nav-btn" (click)="onCartClick()">
          <i class="fas fa-shopping-cart"></i>
          <span class="badge bg-danger cart-badge" *ngIf="cartItemCount > 0">{{cartItemCount}}</span>
        </button>

        <!-- User Menu -->
        <div class="dropdown">
          <button class="btn btn-link nav-btn" id="userMenu" data-bs-toggle="dropdown">
            <i class="fas fa-user-circle"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end modern-dropdown">
            <li class="dropdown-header">My Account</li>
            <li><a class="dropdown-item" (click)="onProfileClick()"><i class="fas fa-user me-2"></i> Profile</a></li>
            <li><a class="dropdown-item" (click)="onOrderHisClick()"><i class="fas fa-history me-2"></i> Order History</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" (click)="logout()"><i class="fas fa-sign-out-alt me-2"></i> Log Out</a></li>
          </ul>
        </div>
      </ng-container>

      <!-- Login/Signup button for non-logged in users -->
      <ng-template #loginButton>
        <button class="nav-btn login-btn" (click)="navigateToLogin()">
          <i class="fas fa-sign-in-alt"></i>
          <span>Login / Sign Up</span>
        </button>
      </ng-template>

      <!-- Theme Toggle (always visible) -->
      <button class="nav-btn theme-toggle" (click)="toggleDarkMode()">
        <i class="fas" [ngClass]="isDarkMode ? 'fa-moon' : 'fa-sun'"></i>
      </button>
    </div>
  </div>
</nav>

